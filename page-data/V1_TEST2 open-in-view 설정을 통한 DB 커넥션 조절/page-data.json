{"componentChunkName":"component---src-templates-blog-post-js","path":"/V1_TEST2 open-in-view ì„¤ì •ì„ í†µí•œ DB ì»¤ë„¥ì…˜ ì¡°ì ˆ/","result":{"data":{"site":{"siteMetadata":{"title":"ìƒê°í•˜ë©´ì„œ ê°œë°œí•˜ê¸°"}},"markdownRemark":{"id":"f4d6818c-f068-5973-8e83-6b949bb21cc2","excerpt":"âœ…  ê°€ ë¬´ì—‡ì¸ê°€? ğŸ“Œ \"JPAê°€ DB ì—°ê²°ì„ ì–¸ì œê¹Œì§€ ì—´ì–´ë†“ì„ê¹Œ?\" ë¥¼ ì •í•˜ëŠ” ì„¤ì •  (ê¸°ë³¸ê°’) â†’ HTTP ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì— ë³´ë‚¼ ë•Œê¹Œì§€ DB ì—°ê²°ì„ ìœ ì§€í•¨.  â†’ ì„œë¹„ìŠ¤ ë©”ì„œë“œ(@Transactional) ëë‚˜ë©´ ë°”ë¡œ DB ì—°ê²°ì„ ë‹«ìŒ. ì¦‰, ë©´ ì¢€ ë” ë¹¨ë¦¬ DBâ€¦","html":"<h2>âœ…  <code class=\"language-text\">open-in-view</code>ê°€ ë¬´ì—‡ì¸ê°€?</h2>\n<blockquote>\n<p>ğŸ“Œ \"JPAê°€ DB ì—°ê²°ì„ ì–¸ì œê¹Œì§€ ì—´ì–´ë†“ì„ê¹Œ?\" ë¥¼ ì •í•˜ëŠ” ì„¤ì •</p>\n</blockquote>\n<ul>\n<li>\n<p><code class=\"language-text\">true</code> (ê¸°ë³¸ê°’)</p>\n<p>â†’ <strong>HTTP ì‘ë‹µì„ ë¸Œë¼ìš°ì €ì— ë³´ë‚¼ ë•Œê¹Œì§€</strong> DB ì—°ê²°ì„ ìœ ì§€í•¨.</p>\n</li>\n<li>\n<p><code class=\"language-text\">false</code></p>\n<p>â†’ <strong>ì„œë¹„ìŠ¤ ë©”ì„œë“œ(@Transactional) ëë‚˜ë©´ ë°”ë¡œ</strong> DB ì—°ê²°ì„ ë‹«ìŒ.</p>\n</li>\n</ul>\n<p>ì¦‰, <code class=\"language-text\">false</code>ë©´ <strong>ì¢€ ë” ë¹¨ë¦¬</strong> DB ìì›ì„ ì •ë¦¬í•˜ì§€ë§Œ  <strong>ì§€ì—° ë¡œë”©</strong>ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìŒ.</p>\n<h3>ë¹„ìœ ë¡œ ì„¤ëª…í•˜ë©´â€¦</h3>\n<blockquote>\n<p>â€œë§ˆíŠ¸ì—ì„œ ë¬¼ê±´ ë‹´ê¸° vs ê³„ì‚°í•˜ê¸°â€</p>\n</blockquote>\n<ul>\n<li><code class=\"language-text\">true</code>: ê³„ì‚°ëŒ€ì— ê°€ì„œë„ ë¬¼ê±´ì„ ë” ë‹´ì„ ìˆ˜ ìˆìŒ. (í¸í•¨)</li>\n<li><code class=\"language-text\">false</code>: ë¬¼ê±´ ë‹´ê¸°ëŠ” ìƒí’ˆ ì§„ì—´ëŒ€ ì•ì—ì„œë§Œ ëë‚´ì•¼ í•˜ê³ , ê³„ì‚°ëŒ€ ê°€ë©´ ë” ì´ìƒ ë‹´ì„ ìˆ˜ ì—†ìŒ. (ë¹¨ë¦¬ ì •ë¦¬ë¨, í•˜ì§€ë§Œ ë¶ˆí¸)</li>\n</ul>\n<p>ì´ì œ <code class=\"language-text\">false</code>ì¼ ë•ŒëŠ” <strong>ë¬¼ê±´ì„ ë¯¸ë¦¬ ë‹¤ ë‹´ì•„ì•¼ í•˜ë‹ˆê¹Œ</strong>,</p>\n<p><strong>ì„œë‘˜ëŸ¬ ì´ê²ƒì €ê²ƒ ë¯¸ë¦¬ ì²˜ë¦¬</strong>í•´ì•¼ í•¨.</p>\n<p>â†’ ì´ê²Œ <strong>ì˜¤íˆë ¤ ëŠë ¤ì§€ê²Œ</strong> ë§Œë“¤ ìˆ˜ ìˆìŒ.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´, ì—°ê´€ ë°ì´í„°(User, Ticket, UserTicket ë“±)ë¥¼ <strong>ë¯¸ë¦¬ ë‹¤ ë¶ˆëŸ¬ì™€ì•¼</strong> í•´ì„œ <strong>DB ë¶€í•˜ê°€ ì»¤ì§€ê±°ë‚˜ ë½ì´ ì˜¤ë˜ ìœ ì§€ë  ìˆ˜ ìˆë‹¤.</strong></p>\n<p>ëŒ€ê·œëª¨ ìš”ì²­ì´ ë°œìƒí•˜ëŠ” ìƒí™©ì—ì„œëŠ” â€œí•˜ë‚˜ë¼ë„ ë” ë¹¨ë¦¬ DB ì»¤ë„¥ì…˜ì„ íšŒìˆ˜â€í•˜ëŠ” ê²Œ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— open-in-view : falseë¡œ ë‘”ë‹¤.</p>\n<table>\n<thead>\n<tr>\n<th>ì„¤ì •</th>\n<th>íŠ¹ì§•</th>\n<th>ì–¸ì œ ì¶”ì²œ?</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">open-in-view: true</code></td>\n<td>ëŠìŠ¨í•¨. ëŠ¦ê²Œê¹Œì§€ DB ì—´ì–´ë‘ .</td>\n<td>ê°œë°œ í¸í•˜ê²Œ í•  ë•Œ</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">open-in-view: false</code></td>\n<td>ì—„ê²©í•¨. íŠ¸ëœì­ì…˜ ëë‚˜ë©´ DB ë‹«ìŒ.</td>\n<td>ëŒ€ê·œëª¨ ì„±ëŠ¥ ìµœì í™”í•  ë•Œ</td>\n</tr>\n</tbody>\n</table>\n<h1>ğŸ”— Fetch Join + DTO ì¡°í•©</h1>\n<ul>\n<li>\n<p>ì½”ë“œ ë³´ê¸°</p>\n<h3><strong>Fetch Join ì‚¬ìš©</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Lock</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LockModeType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PESSIMISTIC_WRITE</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token triple-quoted-string string\">\"\"\"\n    select t from TicketV1 t\n    left join fetch t.userTickets ut\n    left join fetch ut.user\n    where t.ticketId = :ticketId\n    \"\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TicketV1</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findByIdForUpdateWithUsers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3><strong>ì„œë¹„ìŠ¤ ë ˆì´ì–´</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@Transactional</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Ticket</span> <span class=\"token function\">reserveTicket</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> userId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> ticketId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\">>> reserveTicket called: userId = {}, ticketId = {}\"</span><span class=\"token punctuation\">,</span> userId<span class=\"token punctuation\">,</span> ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// userëŠ” fetch join í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë³„ë„ë¡œ ì¡°íšŒ</span>\n        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"User not found\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// fetch joinìœ¼ë¡œ ëª¨ë“  í•„ìš”í•œ ì •ë³´ ë¡œë”©</span>\n        <span class=\"token class-name\">Ticket</span> ticket <span class=\"token operator\">=</span> ticketRepositoryV1<span class=\"token punctuation\">.</span><span class=\"token function\">findByIdForUpdateNative</span><span class=\"token punctuation\">(</span>ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userTicketRepository<span class=\"token punctuation\">.</span><span class=\"token function\">existsByUser_UserIdAndTicket_TicketId</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">,</span> ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            log<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì´ë¯¸ ì˜ˆì•½í•œ ìœ ì €ì…ë‹ˆë‹¤. userId={}, ticketId={}\"</span><span class=\"token punctuation\">,</span> userId<span class=\"token punctuation\">,</span> ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> ticket<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì¤‘ë³µì´ë©´ insert ì•ˆ í•˜ê³  ê·¸ëƒ¥ ë¦¬í„´</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getQuantity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalStateException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ticket out of stock\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        ticket<span class=\"token punctuation\">.</span><span class=\"token function\">setQuantity</span><span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getQuantity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        userTicketRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">UserTicket</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> ticket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> ticket<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h3><strong>ì‘ë‹µ ê°ì²´ DTO</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">TicketReserveResponse</span><span class=\"token punctuation\">(</span>\n    <span class=\"token class-name\">Long</span> ticketId<span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">String</span> ticketName<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">int</span> remainingQuantity<span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">String</span> reservedByUsername\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">TicketReserveResponse</span> <span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TicketV1</span> ticket<span class=\"token punctuation\">,</span> <span class=\"token class-name\">UserV1</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TicketReserveResponse</span><span class=\"token punctuation\">(</span>\n            ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getTicketId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getQuantity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            user<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3><strong>ì»¨íŠ¸ë¡¤ëŸ¬</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PostMapping</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TicketReserveResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">reserve</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token class-name\">Long</span> userId<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token class-name\">Long</span> ticketId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">TicketV1</span> ticket <span class=\"token operator\">=</span> reserveServiceV1<span class=\"token punctuation\">.</span><span class=\"token function\">reserveTicket</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">,</span> ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">UserV1</span> user <span class=\"token operator\">=</span> userRepositoryV1<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TicketReserveResponse</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        log<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜ˆì•½ ì‹¤íŒ¨: {}\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n</li>\n</ul>\n<p><strong><code class=\"language-text\">open-in-view: false</code></strong> ì—ì„œëŠ” <strong>íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ëª¨ë“  ê±¸ ëë‚´ì•¼ í•˜ë¯€ë¡œ</strong>\nâ†’ <strong>Fetch Join</strong>ê³¼ <strong>DTO ë³€í™˜</strong>ì„ ì‚¬ìš©í•´ ë¯¸ë¦¬ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‹¤ ë¶ˆëŸ¬ì™€ì•¼ í•œë‹¤.</p>\n<ul>\n<li>\n<p><strong>ê²°ê³¼</strong> :</p>\n<p><strong>Average</strong>: 69,005ms (â† ì´ì „ë³´ë‹¤ í›¨ì”¬ ë” ëŠë¦¼), <strong>Throughput</strong>: 64.9/sec</p>\n</li>\n<li>\n<p><strong>ì´ìœ </strong></p>\n<ol>\n<li>\n<p><strong>ë¹„ê´€ì  ë½ ìì²´ì˜ ë¹„ìš©ì´ í¼</strong></p>\n<ul>\n<li>íŠ¸ëœì­ì…˜ì´ ê¸¸ì–´ì§ˆìˆ˜ë¡ ë½ ë³´ìœ  ì‹œê°„ë„ ì¦ê°€ â†’ ì§€ì—°ì´ ëˆ„ì ë¨.</li>\n<li><strong>ë™ì‹œì— 10000ëª…ì´ ëª°ë¦¬ë©´</strong>, ë½ì´ ê±¸ë¦° ë‹¤ë¥¸ ìš”ì²­ì€ <strong>ëŒ€ê¸°í•˜ê²Œ ë˜ë¯€ë¡œ ì „ì²´ ì‘ë‹µ ì†ë„ê°€ ëŠ˜ì–´ë‚˜ê³  Throughput ê°ì†Œ</strong></li>\n</ul>\n</li>\n<li>\n<p><strong>Fetch Joinì€ ê²°ê³¼ì ìœ¼ë¡œ ë” ë§ì€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ë½ì„ ì§€ì—°ì‹œí‚´</strong></p>\n<ul>\n<li><code class=\"language-text\">userTickets</code>, <code class=\"language-text\">users</code>ê¹Œì§€ <code class=\"language-text\">JOIN FETCH</code>í•˜ë©´ â†’ ë°ì´í„°ì–‘ Ã— ì¡°ì¸ì¹´ë””ë„ë¦¬í‹° ì¦ê°€.</li>\n<li>DB ì…ì¥ì—ì„  <strong>ë½ì„ ìœ ì§€í•œ ì±„ ë” ë§ì€ ë°ì´í„°ë¥¼ ì²˜ë¦¬</strong> â†’ ë½ ë³´ìœ  ì‹œê°„ ì¦ê°€ â†’ ì „ì²´ ìš”ì²­ ì§€ì—°ë¨.</li>\n</ul>\n</li>\n<li>\n<p><strong>open-in-view: false ì„¤ì •ì€ ì˜ëª» ì‚¬ìš©í•˜ë©´ Lazy ì˜ˆì™¸ëŠ” ë°©ì§€í•˜ë‚˜ íŠ¸ëœì­ì…˜ ë²”ìœ„ê°€ ì»¤ì§€ê¸° ì‰¬ì›€</strong></p>\n<ul>\n<li>\n<p>DTOë¡œ ë§Œë“œëŠ” ê³¼ì •ë„ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ëë‚´ì•¼ í•˜ë¯€ë¡œ â†’ <strong>íŠ¸ëœì­ì…˜ ì¢…ë£Œ ì§€ì ì´ ëŠ¦ì–´ì§</strong>.</p>\n<p>â†’ <strong>ë½ì´ ì˜¤ë˜ ìœ ì§€</strong>ë˜ê³ , ë‹¤ìŒ ìš”ì²­ë“¤ì´ ë” ë§ì´ ë°€ë¦¬ê²Œ ë¨.</p>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n<li>\n<p><strong>í•´ê²° ë°©ë²•</strong></p>\n<h3><strong>âœ… ë¶ˆí•„ìš”í•œ Fetch Join ì œê±°</strong></h3>\n<p>â†’ Ticketë§Œ ë½ ê±¸ê³ , ì—°ê´€ ê°ì²´ëŠ” Lazyë¡œ ë¶„ë¦¬í•˜ê±°ë‚˜ ë³„ë„ë¡œ í•„ìš” ì‹œ ì¡°íšŒ.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Lock</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PESSIMISTIC_WRITE</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select t from TicketV1 t where t.ticketId = :ticketId\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TicketV1</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findByIdForUpdate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> ticketId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"","date":null,"description":null}},"previous":{"fields":{"slug":"/test-post/"},"frontmatter":{"title":"Test Post"}},"next":{"fields":{"slug":"/V1_TEST1 DB ë¹„ê´€ì  ë½ì„ ì´ìš©í•œ ë™ì‹œì„± ì œì–´ ë° ì„±ëŠ¥ í–¥ìƒ/"},"frontmatter":{"title":""}}},"pageContext":{"id":"f4d6818c-f068-5973-8e83-6b949bb21cc2","previousPostId":"9f384cd9-2b83-584c-ba0d-0bfc6048a0f3","nextPostId":"b10bc89f-43d1-53f3-884f-b6ed6fa27f86"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}